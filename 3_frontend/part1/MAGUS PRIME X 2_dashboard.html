<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MAGUS PRIME X - Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-left">
        <div class="logo">
          <span class="logo-icon">X</span>
          <span class="logo-text">MAGUS PRIME X</span>
        </div>
        <div class="nav-links">
          <a href="#" class="active">Dashboard</a>
          <a href="#">Trades</a>
          <a href="#">Assets</a>
          <a href="#">News</a>
        </div>
      </div>
      <div class="navbar-right">
        <button class="start-bot-btn" id="startBotBtn">
          <i class="fa fa-play"></i> Start Bot
        </button>
        <div class="dropdown">
          <button class="currency-btn">
            USD <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content">
            <a href="#">USD</a>
            <a href="#">EUR</a>
            <a href="#">GBP</a>
          </div>
        </div>
        <button class="connect-btn" id="connectBtn">
          <i class="fa fa-plug"></i> Connect
        </button>
        <div class="notification">
          <i class="fa fa-bell"></i>
          <span class="badge">3</span>
        </div>
      </div>
    </nav>

    <div class="dashboard-grid">
      <div class="dashboard-card portfolio-card">
        <h3>Portfolio Value</h3>
        <div class="portfolio-value" id="portfolioValue">$0.00</div>
        <div class="portfolio-change" id="portfolioChange">+0.00% today</div>
      </div>
      <div class="dashboard-card trades-card">
        <h3>Active Trades</h3>
        <div class="trades-count" id="tradesCount">0</div>
        <div class="trades-breakdown" id="tradesBreakdown">
          0 Scalping + 0 Swing
        </div>
      </div>
      <div class="dashboard-card winrate-card">
        <h3>Win Rate</h3>
        <div class="winrate-value" id="winrateValue">0%</div>
        <div class="winrate-period">Last 100 trades</div>
      </div>
    </div>

    <div class="chart-section">
      <div class="section-header">
        <h2>Market Chart</h2>
        <div class="chart-controls">
          <button class="time-btn" data-interval="1m">1m</button>
          <button class="time-btn" data-interval="5m">5m</button>
          <button class="time-btn active" data-interval="15m">15m</button>
          <button class="time-btn" data-interval="1h">1h</button>
          <button class="time-btn" data-interval="4h">4h</button>
          <button class="time-btn" data-interval="1d">1d</button>
        </div>
      </div>
      <div id="tradingview-container"></div>
    </div>

    <div class="trading-panels">
      <div class="panel signals-panel">
        <h3>Trading Signals</h3>
        <div id="signalsList" class="signals-list">
          <!-- Signals will be loaded here -->
        </div>
      </div>
      <div class="panel positions-panel">
        <h3>Open Positions</h3>
        <div id="positionsList" class="positions-list">
          <!-- Positions will be loaded here -->
        </div>
      </div>
      <div class="panel orders-panel">
        <h3>Pending Orders</h3>
        <div id="ordersList" class="orders-list">
          <!-- Orders will be loaded here -->
        </div>
      </div>
    </div>

    <div id="modal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Capital.com Login</h2>
        <div id="loginStatus" class="login-status"></div>
        <form id="loginForm">
          <div class="form-group">
            <label for="apiKey">API Key</label>
            <input type="text" id="apiKey" name="apiKey" value="" required />
          </div>
          <div class="form-group">
            <label for="apiPassword">API Password</label>
            <input
              type="password"
              id="apiPassword"
              name="apiPassword"
              value=""
              required
            />
          </div>
          <div class="form-group">
            <label for="apiIdentifier">API Identifier (Email)</label>
            <input
              type="text"
              id="apiIdentifier"
              name="apiIdentifier"
              value=""
              required
            />
          </div>
          <button type="submit" class="login-btn">
            Connect to Capital.com
          </button>
        </form>
      </div>
    </div>

    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/capital-api.js"></script>
    <script src="js/tradingview-widget.js"></script>
  </body>
</html>
